
## 说明 ##

　　本文档对系统的安装与部署的过程，提供一个行为指南。

### 指南目的 ###

 + 周全的准备
 + 部署过程有序与透明
 + 部署完成后的测试与确认

### 本档内容 ###

 + **系统运行环境**
 + **部署前检查工作**
 + **部署过程**
 + **部署后阶段工作**

## 系统运行环境 ##

 + 收集与明确系统安装部署所需要的运行与支持环境

 + 编写系统运行环境列表（下面是参考示例）

    - 硬件环境

    |设备型号 | 处理器个数 | 硬盘空间 | 内存 (RAM) |
    |-|-|-|-|
    |Intel CPU 体系 | 2 x (vCPU 2.0 GHz)，建议 4 CPU 或以上 | 100G 或以上 | 6G 或以上 |
    |内存使用分配|
    |Tomcat + 应用| 2G | MySQL DB | 2G |

    - 软件环境

        + 服务器

          | 系统 | 版本 |
          |-|-|
          |Servlet 容器 | Tomcat 8.5.51 | JDK | JDK 8u223 |
          | DB System   | MySQL 5.7.14        | OS | Windows Server 2012 R2 |

        + 客户机（管理员）
          |类型|应用|
          |-|-|
          |浏览器| Chrome 79 |

      + 客户机（店铺会员）

          |类型|应用|
          |-|-|
          |浏览器| Chrome 79 |

## 部署前检查工作 ##

### 进场前期文档准备工作

 + 准备与编写系统部署过程文档 

    - 包括系统所需要的运行硬件与软件环境 
    - 系统所涉及到第三方软件的配置文档 
    - 系统部署过程与步骤 
        + 新旧系统替换时，还要考虑到数据的迁移、部署失败的回退等 

    - 部署后一周至一个月的监控期工作，包括
        + 系统日志的收集 
        + 数据库连接的监察 
        + 。。。

 + 预先向客户或相关配合工作人员，提交支撑环境的配置要求
    - 例如 LUCAS 的安装，需要预先要求客户或UC工程师，对 CCM 进行适当的配置，配合 LUCAS 的安装与运行等

### 进场前期检查工作 ###

 + 可以分两步也可以一步完成

    - 提前（可在到现场之前）询问客户，硬件环境 是否准备好。软件环境（主要是OS、客户提供 的DB等软件）是否准备好。 
    - 提前准备我们自带软件是否准备好，包括但不止下面内容： 
        + 要安装系统及支持环境（如 JDK、.NET运行环境等） 
        + 数据库安装系统（盘或文件） 
    
    - 第三方支持系统是否配置好 
        + 例如 WLC、ISE、AD等，涉及到客户第三方系统

### 进场后检查工作 ###

 + 进入现场后的检查工作（部署前）

    - 现场生产环境检查：硬件环境与软件环境是否 符合系统安装条件 
    - 如果客户提供支持环境，则需要检查支持环境 的配置是否符合系统运行条件 
        + 客户提供Tomcat或其他系统的配置是否符合要求，如果不符合就必 须进行修改 
        + 客户提供数据库系统配置是否符合，如果不符合就要修改
        + 其他系统同样的检查

## 部署过程 ##

### 部署过程 ###

 + 按照部署文档进行部署系统 
 + 与客户协调部署过程出现的问题 
 + 系统部署完成之后，系统启动前，可以再次检查一次部署是否正确 
 + 部署完成之后，启动系统，检查系统日志与数据库连接等是否正常

### 部署完成后测试 ###

 + 根据测试文档，视情况先单独测试系统，又或者与客户协调进入客户测试环节

 + 根据测试情况调整参数等

### 完成测试后 ###

 + 客户确认系统初步测试通过之后 
    - 要求客户签单（尽量）
    - 收集当前生产环境信息（可截图等）
        + 硬件信息
        + 软件信息 （如 OS 的版本等信息截图）
        + 系统有关的帐号与密码（OS登录、DB登录、我们系统等）
        + 备份生产环境所部署的系统（可选；能够备份的话，要带回）
        + 其他同维护有关的信息

 + 可征询客户与部门主管，以示部署完成，离开现场

## 部署后阶段工作 ##

 + 在部署之后第一周或第一个月内，作为试运行 阶段，在本阶段：

    - 根据需要定期查看系统的运行日志
        + 有需要，甚至可以是一天一次或多次 
        + 收集系统日志，特别是异常日志。并针对异常进行处理，有需要的，要为系统打补丁 
    - 根据需要定期查看系统的运行状态 
        + 数据库连接状态（连接池的状态） 
        + 有需要，可以使用JMX对系统的内存使用、线程等进行监控

 + 通过一段时间运行后，系统稳定可以作为正式交付运行。
  
    - 备份当前系统（有需要的话，打包并提交到部门共享目录，保存到相 关目录中）
    - 项目完成终结工作
        + 例如文档与代码整理
        + 等等

